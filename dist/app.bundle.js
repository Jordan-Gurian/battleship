"use strict";
(self["webpackChunkwebpack_template"] = self["webpackChunkwebpack_template"] || []).push([["app"],{

/***/ "./src/Game.js":
/*!*********************!*\
  !*** ./src/Game.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Game)
/* harmony export */ });
/* harmony import */ var _Player__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Player */ "./src/Player.js");
/* harmony import */ var _Gameboard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Gameboard */ "./src/Gameboard.js");
/* harmony import */ var _Ship__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Ship */ "./src/Ship.js");



function Game() {
  const winner = null;
  const player = null;
  const computer = null;

  // Create human and computer players and boards
  const gameSetUp = function () {
    const playerBoard = (0,_Gameboard__WEBPACK_IMPORTED_MODULE_1__["default"])();
    const computerBoard = (0,_Gameboard__WEBPACK_IMPORTED_MODULE_1__["default"])();
    this.player = (0,_Player__WEBPACK_IMPORTED_MODULE_0__["default"])(playerBoard);
    this.computer = (0,_Player__WEBPACK_IMPORTED_MODULE_0__["default"])(computerBoard, true, this.player);
    this.player.setOpponent(this.computer);
    this.player.isTurn = true;
    this.computer.isTurn = false;
  };
  const setComputerShips = function (currentPlayer) {
    const SHIP_LENGTHS = [2, 3, 3, 4, 5];
    const BOARD_LENGTH = 10;
    const direction = ['horz', 'vert'];
    while (SHIP_LENGTHS.length > 0) {
      const shipDir = Math.floor(2 * Math.random());
      const x = Math.floor(Math.random() * BOARD_LENGTH);
      const y = Math.floor(Math.random() * BOARD_LENGTH);
      if (currentPlayer.gameboard.placeShip((0,_Ship__WEBPACK_IMPORTED_MODULE_2__["default"])(SHIP_LENGTHS[0]), direction[shipDir], x, y)) {
        SHIP_LENGTHS.shift();
      }
      ;
    }
  };
  const isGameOver = function () {
    if (this.player.gameboard.allShipsSunk()) {
      this.winner = this.computer;
    } else if (this.computer.gameboard.allShipsSunk()) {
      this.winner = this.player;
    }
    return this.winner != null;
  };
  return {
    player,
    computer,
    winner,
    gameSetUp,
    isGameOver,
    setComputerShips
  };
}

/***/ }),

/***/ "./src/Gameboard.js":
/*!**************************!*\
  !*** ./src/Gameboard.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Gameboard)
/* harmony export */ });
function Gameboard() {
  const ships = [];
  const createBoard = function () {
    const BOARD_LENGTH = 10;
    const array = Array(10);
    for (let i = 0; i < BOARD_LENGTH; i++) {
      array[i] = Array(10);
    }
    return array;
  };
  const isSpaceFree = function (x, y) {
    if (this.board[x][y] === undefined) {
      return true;
    }
    return false;
  };
  const board = createBoard();
  const placeShip = function (ship, direction, x, y) {
    const BOARD_LENGTH = 10;
    const tempBoard = this.board;
    const coords = [];
    if (x < 0 || y < 0) {
      return false;
    }
    if (direction === 'horz') {
      for (let i = y; i < y + ship.length; i++) {
        if (i < BOARD_LENGTH && this.isSpaceFree(x, i)) {
          coords.push([x, i]);
        } else {
          return false;
        }
      }
    } else {
      // default to vertical orientation
      for (let i = x; i < x + ship.length; i++) {
        if (i < BOARD_LENGTH && this.isSpaceFree(i, y)) {
          coords.push([i, y]);
        } else {
          return false;
        }
      }
    }
    ships.push(ship);
    coords.forEach(item => {
      tempBoard[item[0]][item[1]] = ship;
    });
    return true;
  };
  const receiveAttack = function (x, y) {
    if (this.board[x][y] === undefined) {
      this.board[x][y] = 'miss';
      return true;
    }
    if (typeof this.board[x][y] === "object") {
      this.board[x][y].hit();
      this.board[x][y] = 'hit';
      return true;
    }
    return false;
  };
  const allShipsSunk = function () {
    return ships.reduce((allShips, currentShip) => allShips && currentShip.isSunk(), true);
  };
  return {
    board,
    placeShip,
    isSpaceFree,
    receiveAttack,
    allShipsSunk
  };
}

/***/ }),

/***/ "./src/Interface.js":
/*!**************************!*\
  !*** ./src/Interface.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Interface)
/* harmony export */ });
/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Game */ "./src/Game.js");
/* harmony import */ var _Ship__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Ship */ "./src/Ship.js");


function Interface() {
  let shipDir = 'horz';
  const vertButton = document.querySelector('.vert');
  vertButton.addEventListener('click', () => {
    shipDir = 'vert';
  });
  const horzButton = document.querySelector('.horz');
  horzButton.addEventListener('click', () => {
    shipDir = 'horz';
  });
  const interfaceSetUp = function () {
    const myGame = (0,_Game__WEBPACK_IMPORTED_MODULE_0__["default"])();
    myGame.gameSetUp();
    myGame.setComputerShips(myGame.computer);
    this.createBoard(myGame, myGame.player);
    this.createBoard(myGame, myGame.computer);
    // myGame.startGame();
    const newGameButton = document.querySelector('.new-game');
    newGameButton.addEventListener('click', () => {
      const gameOver = document.querySelector('.game-over');
      gameOver.textContent = '';
      const newGame = (0,_Game__WEBPACK_IMPORTED_MODULE_0__["default"])();
      newGame.gameSetUp();
      newGame.setComputerShips(newGame.computer);
      this.createBoard(newGame, newGame.player);
      this.createBoard(newGame, newGame.computer);
    });
  };
  const createGameEvents = function (game, currentPlayer) {
    const BOARD_LENGTH = 10;
    let container;
    const box = [];
    if (!currentPlayer.isComputer) {
      container = document.querySelector('.board.human');
    } else {
      container = document.querySelector('.board.computer');
    }
    container.innerHTML = '';
    for (let i = 0; i < BOARD_LENGTH ** 2; i++) {
      box[i] = document.createElement('div');
      box[i].classList.add('board-box');
      if (!currentPlayer.isComputer) {
        this.updateBoard(game, box, currentPlayer.gameboard, i);
      }
      box[i].addEventListener('click', () => {
        if (currentPlayer.isTurn || game.winner != null) {
          return;
        }
        const x = Math.floor(i / 10);
        const y = i % 10;
        currentPlayer.opponent.attack(x, y);
        this.updateBoard(game, box, currentPlayer.gameboard, i);
        box[i].classList.add('no-hover');
        if (currentPlayer.isComputer) {
          const playerBox = Array.from(document.querySelector('.board.human').children);
          const computerAttack = currentPlayer.randomAttack();
          this.updateBoard(game, playerBox, currentPlayer.opponent.gameboard, computerAttack[0] * 10 + computerAttack[1]);
        }
        if (game.isGameOver()) {
          const gameOver = document.querySelector('.game-over');
          if (game.winner === game.player) {
            gameOver.textContent = `Left board wins! Press "New Game" to play again!`;
          } else {
            gameOver.textContent = `Right board wins! Press "New Game" to play again!`;
          }
        }
      });
      // will need to add event listener to track attacks
      container.appendChild(box[i]);
    }
  };
  const createBoard = function (game, currentPlayer) {
    const BOARD_LENGTH = 10;
    let container;
    const box = [];
    if (!currentPlayer.isComputer) {
      container = document.querySelector('.board.human');
    } else {
      container = document.querySelector('.board.computer');
    }
    container.innerHTML = '';
    for (let i = 0; i < BOARD_LENGTH ** 2; i++) {
      box[i] = document.createElement('div');
      box[i].classList.add('board-box');

      // eslint-disable-next-line no-loop-func
      box[i].addEventListener('click', () => {
        if (!currentPlayer.isComputer) {
          const x = Math.floor(i / 10);
          const y = i % 10;
          if (currentPlayer.gameboard.placeShip((0,_Ship__WEBPACK_IMPORTED_MODULE_1__["default"])(currentPlayer.shipLen[0]), shipDir, x, y)) {
            for (let j = 0; j < currentPlayer.shipLen[0]; j++) {
              if (shipDir === 'horz') {
                this.updateBoard(game, box, currentPlayer.gameboard, i + j);
              } else {
                this.updateBoard(game, box, currentPlayer.gameboard, i + 10 * j);
              }
            }
            currentPlayer.shipLen.shift();
          }
          if (currentPlayer.shipLen.length === 0) {
            this.createGameEvents(game, currentPlayer);
            this.createGameEvents(game, currentPlayer.opponent);
          }
        }
      });
      container.appendChild(box[i]);
    }
  };
  const updateBoard = function (game, box, gameboard, i) {
    const x = Math.floor(i / 10);
    const y = i % 10;
    if (typeof gameboard.board[x][y] === 'object') {
      box[i].textContent = 'S';
    } else if (gameboard.board[x][y] === 'miss') {
      box[i].textContent = 'M';
    } else if (gameboard.board[x][y] === 'hit') {
      box[i].textContent = 'H';
    }
  };
  return {
    createBoard,
    interfaceSetUp,
    updateBoard,
    createGameEvents
  };
}

/***/ }),

/***/ "./src/Player.js":
/*!***********************!*\
  !*** ./src/Player.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Player)
/* harmony export */ });
function Player(gameboard) {
  let isComputer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  let opponent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
  let isTurn = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
  const shipLen = [2, 3, 3, 4, 5];
  const setOpponent = function (player) {
    this.opponent = player;
  };
  const randomAttack = function () {
    const BOARD_LENGTH = 10;
    let x;
    let y;
    while (this.isTurn) {
      x = Math.floor(Math.random() * BOARD_LENGTH);
      y = Math.floor(Math.random() * BOARD_LENGTH);
      this.attack(x, y);
    }
    return [x, y];
  };
  const attack = function (x, y) {
    if (this.opponent === null) {
      return;
    }
    const madeMove = this.opponent.gameboard.receiveAttack(x, y);
    if (madeMove) {
      this.changeTurn();
      this.opponent.changeTurn();
    }
  };
  const changeTurn = function () {
    this.isTurn = !this.isTurn;
  };
  return {
    gameboard,
    isComputer,
    opponent,
    isTurn,
    shipLen,
    setOpponent,
    attack,
    randomAttack,
    changeTurn
  };
}

/***/ }),

/***/ "./src/Ship.js":
/*!*********************!*\
  !*** ./src/Ship.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Ship)
/* harmony export */ });
function Ship(length) {
  if (length > 5) {
    this.length = 5;
  }
  if (length < 2) {
    this.length = 2;
  }
  const hit = function () {
    if (!this.isSunk()) {
      this.numHits += 1;
    }
  };
  const isSunk = function () {
    if (this.numHits >= this.length) {
      return true;
    }
    return false;
  };
  return {
    length,
    numHits: 0,
    hit,
    isSunk
  };
}

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./style.css */ "./src/style.css");
/* harmony import */ var normalize_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! normalize.css */ "./node_modules/normalize.css/normalize.css");
/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Game */ "./src/Game.js");
/* harmony import */ var _Interface__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Interface */ "./src/Interface.js");





// const myGame = Game();
// myGame.gameSetUp();
// myGame.startGame();

const myUI = (0,_Interface__WEBPACK_IMPORTED_MODULE_3__["default"])();
myUI.interfaceSetUp();
// myUI.createBoard(true);
// myUI.createBoard(false);

/***/ }),

/***/ "./node_modules/normalize.css/normalize.css":
/*!**************************************************!*\
  !*** ./node_modules/normalize.css/normalize.css ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./src/style.css":
/*!***********************!*\
  !*** ./src/style.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ var __webpack_exports__ = (__webpack_exec__("./src/index.js"));
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU0sR0FBRyxDQUFDLEVBQUU7SUFDWixJQUFJLENBQUNBLE1BQU0sR0FBRyxDQUFDO0VBQ25CO0VBRUEsTUFBTTJCLEdBQUcsR0FBRyxTQUFBQSxDQUFBLEVBQVc7SUFDbkIsSUFBSSxDQUFDLElBQUksQ0FBQ0ksTUFBTSxDQUFDLENBQUMsRUFBRTtNQUNoQixJQUFJLENBQUNvQyxPQUFPLElBQUksQ0FBQztJQUNyQjtFQUNKLENBQUM7RUFFRCxNQUFNcEMsTUFBTSxHQUFHLFNBQUFBLENBQUEsRUFBVztJQUN0QixJQUFJLElBQUksQ0FBQ29DLE9BQU8sSUFBSSxJQUFJLENBQUNuRSxNQUFNLEVBQUU7TUFDN0IsT0FBTyxJQUFJO0lBQ2Y7SUFDQSxPQUFPLEtBQUs7RUFDaEIsQ0FBQztFQUVELE9BQU87SUFBRUEsTUFBTTtJQUFFbUUsT0FBTyxFQUFFLENBQUM7SUFBRXhDLEdBQUc7SUFBRUk7RUFBTyxDQUFDO0FBQzlDOzs7Ozs7Ozs7Ozs7Ozs7QUN2QnFCO0FBQ0U7QUFDRztBQUNVOztBQUdwQztBQUNBO0FBQ0E7O0FBRUEsTUFBTXFDLElBQUksR0FBR3BDLHNEQUFTLENBQUMsQ0FBQztBQUV4Qm9DLElBQUksQ0FBQzlCLGNBQWMsQ0FBQyxDQUFDO0FBQ3JCO0FBQ0E7Ozs7Ozs7Ozs7O0FDZEE7Ozs7Ozs7Ozs7OztBQ0FBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VicGFjay10ZW1wbGF0ZS8uL3NyYy9HYW1lLmpzIiwid2VicGFjazovL3dlYnBhY2stdGVtcGxhdGUvLi9zcmMvR2FtZWJvYXJkLmpzIiwid2VicGFjazovL3dlYnBhY2stdGVtcGxhdGUvLi9zcmMvSW50ZXJmYWNlLmpzIiwid2VicGFjazovL3dlYnBhY2stdGVtcGxhdGUvLi9zcmMvUGxheWVyLmpzIiwid2VicGFjazovL3dlYnBhY2stdGVtcGxhdGUvLi9zcmMvU2hpcC5qcyIsIndlYnBhY2s6Ly93ZWJwYWNrLXRlbXBsYXRlLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3dlYnBhY2stdGVtcGxhdGUvLi9ub2RlX21vZHVsZXMvbm9ybWFsaXplLmNzcy9ub3JtYWxpemUuY3NzIiwid2VicGFjazovL3dlYnBhY2stdGVtcGxhdGUvLi9zcmMvc3R5bGUuY3NzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQbGF5ZXIgZnJvbSAnLi9QbGF5ZXInXG5pbXBvcnQgR2FtZWJvYXJkIGZyb20gJy4vR2FtZWJvYXJkJztcbmltcG9ydCBTaGlwIGZyb20gJy4vU2hpcCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEdhbWUoKSB7XG4gICAgXG4gICAgY29uc3Qgd2lubmVyID0gbnVsbDtcbiAgICBjb25zdCBwbGF5ZXIgPSBudWxsO1xuICAgIGNvbnN0IGNvbXB1dGVyID0gbnVsbDtcblxuICAgIC8vIENyZWF0ZSBodW1hbiBhbmQgY29tcHV0ZXIgcGxheWVycyBhbmQgYm9hcmRzXG4gICAgY29uc3QgZ2FtZVNldFVwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHBsYXllckJvYXJkID0gR2FtZWJvYXJkKCk7XG4gICAgICAgIGNvbnN0IGNvbXB1dGVyQm9hcmQgPSBHYW1lYm9hcmQoKTtcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBQbGF5ZXIocGxheWVyQm9hcmQpO1xuICAgICAgICB0aGlzLmNvbXB1dGVyID0gUGxheWVyKGNvbXB1dGVyQm9hcmQsIHRydWUsIHRoaXMucGxheWVyKTtcbiAgICAgICAgdGhpcy5wbGF5ZXIuc2V0T3Bwb25lbnQodGhpcy5jb21wdXRlcik7XG4gICAgICAgIHRoaXMucGxheWVyLmlzVHVybiA9IHRydWU7XG4gICAgICAgIHRoaXMuY29tcHV0ZXIuaXNUdXJuID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgc2V0Q29tcHV0ZXJTaGlwcyA9IGZ1bmN0aW9uKGN1cnJlbnRQbGF5ZXIpIHtcbiAgICAgICAgY29uc3QgU0hJUF9MRU5HVEhTID0gWzIsIDMsIDMsIDQsIDVdOyBcbiAgICAgICAgY29uc3QgQk9BUkRfTEVOR1RIID0gMTA7XG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IFsnaG9yeicsICd2ZXJ0J107XG4gICAgICAgIHdoaWxlIChTSElQX0xFTkdUSFMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgc2hpcERpciA9IE1hdGguZmxvb3IoMiAqIE1hdGgucmFuZG9tKCkpO1xuICAgICAgICAgICAgY29uc3QgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIEJPQVJEX0xFTkdUSCk7XG4gICAgICAgICAgICBjb25zdCB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogQk9BUkRfTEVOR1RIKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UGxheWVyLmdhbWVib2FyZC5wbGFjZVNoaXAoU2hpcChTSElQX0xFTkdUSFNbMF0pLCBkaXJlY3Rpb25bc2hpcERpcl0sIHgsIHkpKSB7XG4gICAgICAgICAgICAgICAgU0hJUF9MRU5HVEhTLnNoaWZ0KCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaXNHYW1lT3ZlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5wbGF5ZXIuZ2FtZWJvYXJkLmFsbFNoaXBzU3VuaygpKSB7XG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuY29tcHV0ZXI7XG4gICAgICAgIH0gXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY29tcHV0ZXIuZ2FtZWJvYXJkLmFsbFNoaXBzU3VuaygpKSB7XG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMucGxheWVyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLndpbm5lciAhPSBudWxsXG4gICAgfVxuXG4gICAgcmV0dXJuIHsgcGxheWVyLCBjb21wdXRlciwgd2lubmVyLCBnYW1lU2V0VXAsIGlzR2FtZU92ZXIsIHNldENvbXB1dGVyU2hpcHMgfVxufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEdhbWVib2FyZCgpIHtcbiAgICBcbiAgICBjb25zdCBzaGlwcyA9IFtdO1xuXG4gICAgY29uc3QgY3JlYXRlQm9hcmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3QgQk9BUkRfTEVOR1RIID0gMTA7XG4gICAgICAgIGNvbnN0IGFycmF5ID0gQXJyYXkoMTApO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQk9BUkRfTEVOR1RIOyBpKyspIHtcbiAgICAgICAgICAgIGFycmF5W2ldID0gQXJyYXkoMTApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9XG5cbiAgICBjb25zdCBpc1NwYWNlRnJlZSA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgaWYgKHRoaXMuYm9hcmRbeF1beV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGJvYXJkID0gY3JlYXRlQm9hcmQoKTtcblxuICAgIGNvbnN0IHBsYWNlU2hpcCA9IGZ1bmN0aW9uKHNoaXAsIGRpcmVjdGlvbiwgeCwgeSkge1xuICAgICAgICBjb25zdCBCT0FSRF9MRU5HVEggPSAxMDtcbiAgICAgICAgY29uc3QgdGVtcEJvYXJkID0gdGhpcy5ib2FyZDtcbiAgICAgICAgY29uc3QgY29vcmRzID0gW107XG4gICAgICAgIGlmICh4IDwgMCB8fCB5IDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnaG9yeicpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSB5OyBpIDwgeSArIHNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA8IEJPQVJEX0xFTkdUSCAmJiB0aGlzLmlzU3BhY2VGcmVlKHgsIGkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvb3Jkcy5wdXNoKFt4LCBpXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgeyAvLyBkZWZhdWx0IHRvIHZlcnRpY2FsIG9yaWVudGF0aW9uXG4gICAgICAgICAgICBmb3IgKGxldCBpID0geDsgaSA8IHggKyBzaGlwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPCBCT0FSRF9MRU5HVEggJiYgdGhpcy5pc1NwYWNlRnJlZShpLCB5KSkge1xuICAgICAgICAgICAgICAgICAgICBjb29yZHMucHVzaChbaSwgeV0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGlwcy5wdXNoKHNoaXApO1xuICAgICAgICBjb29yZHMuZm9yRWFjaCggKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIHRlbXBCb2FyZFtpdGVtWzBdXVtpdGVtWzFdXSA9IHNoaXA7XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgaWYgKHRoaXMuYm9hcmRbeF1beV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5ib2FyZFt4XVt5XSA9ICdtaXNzJztcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmJvYXJkW3hdW3ldID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aGlzLmJvYXJkW3hdW3ldLmhpdCgpO1xuICAgICAgICAgICAgdGhpcy5ib2FyZFt4XVt5XSA9ICdoaXQnO1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBhbGxTaGlwc1N1bmsgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHNoaXBzLnJlZHVjZSgoYWxsU2hpcHMsIGN1cnJlbnRTaGlwKSA9PiBhbGxTaGlwcyAmJiBjdXJyZW50U2hpcC5pc1N1bmsoKSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgYm9hcmQsIHBsYWNlU2hpcCwgaXNTcGFjZUZyZWUsIHJlY2VpdmVBdHRhY2ssIGFsbFNoaXBzU3VuayB9XG5cbn0iLCJpbXBvcnQgR2FtZSBmcm9tICcuL0dhbWUnO1xuaW1wb3J0IFNoaXAgZnJvbSAnLi9TaGlwJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSW50ZXJmYWNlKCkge1xuXG5cbiAgICBsZXQgc2hpcERpciA9ICdob3J6JztcblxuICAgIGNvbnN0IHZlcnRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmVydCcpO1xuXG4gICAgdmVydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgc2hpcERpciA9ICd2ZXJ0JztcbiAgICB9KVxuXG4gICAgY29uc3QgaG9yekJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ob3J6Jyk7XG5cbiAgICBob3J6QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBzaGlwRGlyID0gJ2hvcnonO1xuICAgIH0pXG5cbiAgICBjb25zdCBpbnRlcmZhY2VTZXRVcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCBteUdhbWUgPSBHYW1lKCk7XG4gICAgICAgIG15R2FtZS5nYW1lU2V0VXAoKTtcbiAgICAgICAgbXlHYW1lLnNldENvbXB1dGVyU2hpcHMobXlHYW1lLmNvbXB1dGVyKTtcbiAgICAgICAgdGhpcy5jcmVhdGVCb2FyZChteUdhbWUsIG15R2FtZS5wbGF5ZXIpO1xuICAgICAgICB0aGlzLmNyZWF0ZUJvYXJkKG15R2FtZSwgbXlHYW1lLmNvbXB1dGVyKTtcbiAgICAgICAgLy8gbXlHYW1lLnN0YXJ0R2FtZSgpO1xuICAgICAgICBjb25zdCBuZXdHYW1lQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ldy1nYW1lJyk7XG4gICAgICAgIG5ld0dhbWVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBnYW1lT3ZlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLW92ZXInKTtcbiAgICAgICAgICAgIGdhbWVPdmVyLnRleHRDb250ZW50ID0gJyc7XG4gICAgICAgICAgICBjb25zdCBuZXdHYW1lID0gR2FtZSgpO1xuICAgICAgICAgICAgbmV3R2FtZS5nYW1lU2V0VXAoKTtcbiAgICAgICAgICAgIG5ld0dhbWUuc2V0Q29tcHV0ZXJTaGlwcyhuZXdHYW1lLmNvbXB1dGVyKTtcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQm9hcmQobmV3R2FtZSwgbmV3R2FtZS5wbGF5ZXIpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVCb2FyZChuZXdHYW1lLCBuZXdHYW1lLmNvbXB1dGVyKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBjb25zdCBjcmVhdGVHYW1lRXZlbnRzID0gZnVuY3Rpb24oZ2FtZSwgY3VycmVudFBsYXllcikge1xuICAgICAgICBjb25zdCBCT0FSRF9MRU5HVEggPSAxMDtcbiAgICAgICAgbGV0IGNvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgYm94ID0gW107XG5cbiAgICAgICAgaWYgKCFjdXJyZW50UGxheWVyLmlzQ29tcHV0ZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib2FyZC5odW1hbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvYXJkLmNvbXB1dGVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQk9BUkRfTEVOR1RIKioyOyBpKyspIHtcbiAgICAgICAgICAgIGJveFtpXSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgYm94W2ldLmNsYXNzTGlzdC5hZGQoJ2JvYXJkLWJveCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRQbGF5ZXIuaXNDb21wdXRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQm9hcmQoZ2FtZSwgYm94LCBjdXJyZW50UGxheWVyLmdhbWVib2FyZCwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGJveFtpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBsYXllci5pc1R1cm4gfHwgZ2FtZS53aW5uZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgeCA9IE1hdGguZmxvb3IoaSAvIDEwKTtcbiAgICAgICAgICAgICAgICBjb25zdCB5ID0gaSAlIDEwO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQbGF5ZXIub3Bwb25lbnQuYXR0YWNrKHgsIHkpO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQm9hcmQoZ2FtZSwgYm94LCBjdXJyZW50UGxheWVyLmdhbWVib2FyZCwgaSk7XG4gICAgICAgICAgICAgICAgYm94W2ldLmNsYXNzTGlzdC5hZGQoJ25vLWhvdmVyJyk7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQbGF5ZXIuaXNDb21wdXRlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXJCb3ggPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib2FyZC5odW1hbicpLmNoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcHV0ZXJBdHRhY2sgPSBjdXJyZW50UGxheWVyLnJhbmRvbUF0dGFjaygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJvYXJkKGdhbWUsIHBsYXllckJveCwgY3VycmVudFBsYXllci5vcHBvbmVudC5nYW1lYm9hcmQsIGNvbXB1dGVyQXR0YWNrWzBdICogMTAgKyBjb21wdXRlckF0dGFja1sxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnYW1lLmlzR2FtZU92ZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBnYW1lT3ZlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLW92ZXInKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUud2lubmVyID09PSBnYW1lLnBsYXllcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZU92ZXIudGV4dENvbnRlbnQgPSBgTGVmdCBib2FyZCB3aW5zISBQcmVzcyBcIk5ldyBHYW1lXCIgdG8gcGxheSBhZ2FpbiFgO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZU92ZXIudGV4dENvbnRlbnQgPSBgUmlnaHQgYm9hcmQgd2lucyEgUHJlc3MgXCJOZXcgR2FtZVwiIHRvIHBsYXkgYWdhaW4hYDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2lsbCBuZWVkIHRvIGFkZCBldmVudCBsaXN0ZW5lciB0byB0cmFjayBhdHRhY2tzXG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYm94W2ldKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZUJvYXJkID0gZnVuY3Rpb24oZ2FtZSwgY3VycmVudFBsYXllcikge1xuICAgICAgICBjb25zdCBCT0FSRF9MRU5HVEggPSAxMDtcbiAgICAgICAgbGV0IGNvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgYm94ID0gW107XG5cbiAgICAgICAgaWYgKCFjdXJyZW50UGxheWVyLmlzQ29tcHV0ZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib2FyZC5odW1hbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJvYXJkLmNvbXB1dGVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQk9BUkRfTEVOR1RIKioyOyBpKyspIHtcbiAgICAgICAgICAgIGJveFtpXSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgYm94W2ldLmNsYXNzTGlzdC5hZGQoJ2JvYXJkLWJveCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbG9vcC1mdW5jXG4gICAgICAgICAgICBib3hbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50UGxheWVyLmlzQ29tcHV0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeCA9IE1hdGguZmxvb3IoaSAvIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeSA9IGkgJSAxMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQbGF5ZXIuZ2FtZWJvYXJkLnBsYWNlU2hpcChTaGlwKGN1cnJlbnRQbGF5ZXIuc2hpcExlblswXSksIHNoaXBEaXIsIHgsIHkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGN1cnJlbnRQbGF5ZXIuc2hpcExlblswXTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNoaXBEaXIgPT09ICdob3J6Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJvYXJkKGdhbWUsIGJveCwgY3VycmVudFBsYXllci5nYW1lYm9hcmQsIGkraik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCb2FyZChnYW1lLCBib3gsIGN1cnJlbnRQbGF5ZXIuZ2FtZWJvYXJkLCBpICsgKDEwICogaikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQbGF5ZXIuc2hpcExlbi5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UGxheWVyLnNoaXBMZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUdhbWVFdmVudHMoZ2FtZSwgY3VycmVudFBsYXllcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUdhbWVFdmVudHMoZ2FtZSwgY3VycmVudFBsYXllci5vcHBvbmVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJveFtpXSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBcblxuICAgIGNvbnN0IHVwZGF0ZUJvYXJkID0gZnVuY3Rpb24oZ2FtZSwgYm94LCBnYW1lYm9hcmQsIGkpIHtcbiAgICAgICAgY29uc3QgeCA9IE1hdGguZmxvb3IoaSAvIDEwKTtcbiAgICAgICAgY29uc3QgeSA9IGkgJSAxMDtcbiAgICAgICAgaWYgKHR5cGVvZiBnYW1lYm9hcmQuYm9hcmRbeF1beV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBib3hbaV0udGV4dENvbnRlbnQgPSAnUyc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ2FtZWJvYXJkLmJvYXJkW3hdW3ldID09PSAnbWlzcycpIHtcbiAgICAgICAgICAgIGJveFtpXS50ZXh0Q29udGVudCA9ICdNJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChnYW1lYm9hcmQuYm9hcmRbeF1beV0gPT09ICdoaXQnKSB7XG4gICAgICAgICAgICBib3hbaV0udGV4dENvbnRlbnQgPSAnSCc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyAgY3JlYXRlQm9hcmQsIGludGVyZmFjZVNldFVwLCB1cGRhdGVCb2FyZCwgY3JlYXRlR2FtZUV2ZW50cyB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQbGF5ZXIoZ2FtZWJvYXJkLCBpc0NvbXB1dGVyID0gZmFsc2UsIG9wcG9uZW50ID0gbnVsbCwgaXNUdXJuID0gZmFsc2UpIHtcbiAgICBcbiAgICBjb25zdCBzaGlwTGVuID0gWzIsIDMsIDMsIDQsIDVdOyBcblxuICAgIGNvbnN0IHNldE9wcG9uZW50ID0gZnVuY3Rpb24ocGxheWVyKSB7XG4gICAgICAgIHRoaXMub3Bwb25lbnQgPSBwbGF5ZXI7XG4gICAgfVxuXG5cbiAgICBjb25zdCByYW5kb21BdHRhY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3QgQk9BUkRfTEVOR1RIID0gMTA7XG4gICAgICAgIGxldCB4O1xuICAgICAgICBsZXQgeTtcbiAgICAgICAgd2hpbGUgKHRoaXMuaXNUdXJuKSB7XG4gICAgICAgICAgICB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogQk9BUkRfTEVOR1RIKTtcbiAgICAgICAgICAgIHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBCT0FSRF9MRU5HVEgpO1xuICAgICAgICAgICAgdGhpcy5hdHRhY2soeCwgeSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFt4LCB5XVxuICAgIH1cblxuICAgIGNvbnN0IGF0dGFjayA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgaWYgKHRoaXMub3Bwb25lbnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1hZGVNb3ZlID0gdGhpcy5vcHBvbmVudC5nYW1lYm9hcmQucmVjZWl2ZUF0dGFjayh4LCB5KTtcbiAgICAgICAgaWYgKG1hZGVNb3ZlKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVR1cm4oKTtcbiAgICAgICAgICAgIHRoaXMub3Bwb25lbnQuY2hhbmdlVHVybigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlVHVybiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmlzVHVybiA9ICF0aGlzLmlzVHVybjtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgZ2FtZWJvYXJkLCBpc0NvbXB1dGVyLCBvcHBvbmVudCwgaXNUdXJuLCBzaGlwTGVuLCBcbiAgICAgICAgc2V0T3Bwb25lbnQsIGF0dGFjaywgcmFuZG9tQXR0YWNrLCBjaGFuZ2VUdXJuIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTaGlwKGxlbmd0aCkge1xuICAgIGlmIChsZW5ndGggPiA1KSB7IFxuICAgICAgICB0aGlzLmxlbmd0aCA9IDU7XG4gICAgfVxuXG4gICAgaWYgKGxlbmd0aCA8IDIpIHtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAyO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBoaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3VuaygpKSB7XG4gICAgICAgICAgICB0aGlzLm51bUhpdHMgKz0gMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGlzU3VuayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5udW1IaXRzID49IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgbGVuZ3RoLCBudW1IaXRzOiAwLCBoaXQsIGlzU3VuayB9XG59IiwiaW1wb3J0IFwiLi9zdHlsZS5jc3NcIjtcbmltcG9ydCBcIm5vcm1hbGl6ZS5jc3NcIjtcbmltcG9ydCBHYW1lIGZyb20gJy4vR2FtZSc7XG5pbXBvcnQgSW50ZXJmYWNlIGZyb20gJy4vSW50ZXJmYWNlJztcblxuXG4vLyBjb25zdCBteUdhbWUgPSBHYW1lKCk7XG4vLyBteUdhbWUuZ2FtZVNldFVwKCk7XG4vLyBteUdhbWUuc3RhcnRHYW1lKCk7XG5cbmNvbnN0IG15VUkgPSBJbnRlcmZhY2UoKTtcblxubXlVSS5pbnRlcmZhY2VTZXRVcCgpO1xuLy8gbXlVSS5jcmVhdGVCb2FyZCh0cnVlKTtcbi8vIG15VUkuY3JlYXRlQm9hcmQoZmFsc2UpO1xuXG4iLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiXSwibmFtZXMiOlsiUGxheWVyIiwiR2FtZWJvYXJkIiwiU2hpcCIsIkdhbWUiLCJ3aW5uZXIiLCJwbGF5ZXIiLCJjb21wdXRlciIsImdhbWVTZXRVcCIsInBsYXllckJvYXJkIiwiY29tcHV0ZXJCb2FyZCIsInNldE9wcG9uZW50IiwiaXNUdXJuIiwic2V0Q29tcHV0ZXJTaGlwcyIsImN1cnJlbnRQbGF5ZXIiLCJTSElQX0xFTkdUSFMiLCJCT0FSRF9MRU5HVEgiLCJkaXJlY3Rpb24iLCJsZW5ndGgiLCJzaGlwRGlyIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwieCIsInkiLCJnYW1lYm9hcmQiLCJwbGFjZVNoaXAiLCJzaGlmdCIsImlzR2FtZU92ZXIiLCJhbGxTaGlwc1N1bmsiLCJzaGlwcyIsImNyZWF0ZUJvYXJkIiwiYXJyYXkiLCJBcnJheSIsImkiLCJpc1NwYWNlRnJlZSIsImJvYXJkIiwidW5kZWZpbmVkIiwic2hpcCIsInRlbXBCb2FyZCIsImNvb3JkcyIsInB1c2giLCJmb3JFYWNoIiwiaXRlbSIsInJlY2VpdmVBdHRhY2siLCJoaXQiLCJyZWR1Y2UiLCJhbGxTaGlwcyIsImN1cnJlbnRTaGlwIiwiaXNTdW5rIiwiSW50ZXJmYWNlIiwidmVydEJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJob3J6QnV0dG9uIiwiaW50ZXJmYWNlU2V0VXAiLCJteUdhbWUiLCJuZXdHYW1lQnV0dG9uIiwiZ2FtZU92ZXIiLCJ0ZXh0Q29udGVudCIsIm5ld0dhbWUiLCJjcmVhdGVHYW1lRXZlbnRzIiwiZ2FtZSIsImNvbnRhaW5lciIsImJveCIsImlzQ29tcHV0ZXIiLCJpbm5lckhUTUwiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwidXBkYXRlQm9hcmQiLCJvcHBvbmVudCIsImF0dGFjayIsInBsYXllckJveCIsImZyb20iLCJjaGlsZHJlbiIsImNvbXB1dGVyQXR0YWNrIiwicmFuZG9tQXR0YWNrIiwiYXBwZW5kQ2hpbGQiLCJzaGlwTGVuIiwiaiIsImFyZ3VtZW50cyIsIm1hZGVNb3ZlIiwiY2hhbmdlVHVybiIsIm51bUhpdHMiLCJteVVJIl0sInNvdXJjZVJvb3QiOiIifQ==